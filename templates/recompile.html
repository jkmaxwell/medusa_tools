{% extends "base.html" %}

{% block title %}Recompile Wavetable - {{ app_name }}{% endblock %}

{% block content %}
<h2>Recompile Wavetable</h2>
<p style="margin-bottom: 2rem; color: #666;">
    Upload your edited WAV files to create a new .polyend wavetable bank.
    You need exactly 64 WAV files named wavetable_00.wav through wavetable_63.wav.
</p>

<form method="POST" enctype="multipart/form-data">
    <div class="form-group">
        <label for="files">Select WAV Files</label>
        <input type="file" id="files" name="files" multiple accept=".wav" required>
        <div class="file-info">
            Select all 64 WAV files (wavetable_00.wav through wavetable_63.wav).
            Files must be 44.1kHz, 16-bit, mono format.
        </div>
    </div>
    
    <div class="form-group">
        <label for="output_filename">Output Filename</label>
        <input type="text" id="output_filename" name="output_filename" value="recompiled.polyend" placeholder="recompiled.polyend">
        <div class="file-info">
            The filename for your recompiled wavetable bank. '.polyend' extension will be added automatically if missing.
        </div>
    </div>
    
    <button type="submit" class="btn">Recompile Wavetable</button>
</form>

<div style="margin-top: 2rem; background: #fef2f2; border: 1px solid #fca5a5; border-radius: 8px; padding: 1.5rem;">
    <h4 style="color: #dc2626; margin-bottom: 1rem;">‚ö†Ô∏è Important Requirements</h4>
    <ul style="color: #dc2626; padding-left: 1.5rem;">
        <li style="margin-bottom: 0.5rem;"><strong>Exactly 64 files</strong> - wavetable_00.wav through wavetable_63.wav</li>
        <li style="margin-bottom: 0.5rem;"><strong>Correct naming</strong> - Files must follow the exact naming pattern</li>
        <li style="margin-bottom: 0.5rem;"><strong>44.1kHz, 16-bit, mono</strong> - Use these exact audio specifications</li>
        <li style="margin-bottom: 0.5rem;"><strong>Single-cycle waveforms</strong> - Each file should contain one cycle</li>
        <li>Missing or incorrectly named files will cause the compilation to fail</li>
    </ul>
</div>

<div style="margin-top: 1.5rem; background: #eff6ff; border: 1px solid #93c5fd; border-radius: 8px; padding: 1.5rem;">
    <h4 style="color: #1d4ed8; margin-bottom: 1rem;">üí° Pro Tips</h4>
    <ul style="color: #1d4ed8; padding-left: 1.5rem;">
        <li style="margin-bottom: 0.5rem;">Use the <a href="{{ url_for('decompile_wavetable_route') }}" style="color: #1d4ed8; font-weight: 600;">Decompile</a> tool first to get properly formatted WAV files</li>
        <li style="margin-bottom: 0.5rem;">Edit files in your favorite audio editor (Audacity, Logic, etc.)</li>
        <li style="margin-bottom: 0.5rem;">Keep the original file structure and naming intact</li>
        <li>Test your recompiled .polyend file on your Medusa before deleting originals</li>
    </ul>
</div>
{% endblock %} 